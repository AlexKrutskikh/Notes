
# üìùNotes API ‚Äì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (User –∏ Admin).  
**–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:** FastAPI + MongoDB + JWT + Docker .

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **üìå –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ email —Å –∫–æ–¥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è**
- **üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT (—Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—É–∫–∞—Ö)**
- **üìù CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–º–µ—Ç–∫–∞–º–∏**
- **üõ°Ô∏è –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ (–ø—Ä–∞–≤–∞ User –∏ Admin)**
- **üìú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- **üê≥ –ì–æ—Ç–æ–≤—ã–π Dockerfile –∏ docker-compose.yml**
- **‚öôÔ∏è Pytest —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤**

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫  

#### –ü–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.  

### üê≥ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker
```bash
   git clone https://github.com/AlexKrutskikh/Notes
   cd Notes
   docker-compose up -d
  ```
### –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

- üöÄ app ‚Äì backend API

- üóÑÔ∏èmongo_db ‚Äì –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- üîÑ  web ‚Äì –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏

## –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
‚û° http://localhost  
‚û° http://localhost/docs

### üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
   git clone https://github.com/AlexKrutskikh/Notes
   cd Notes
   python main.py
  ```
#### –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ .env: 
###### –ó–∞–º–µ–Ω–∏—Ç–µ MONGO_HOST=mongo_db –Ω–∞ MONGO_HOST=localhost.

###### –ü—Ä–æ–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –±–∞–∑–µ MONGO –≤ —Ä–∞–Ω–µ–µ –ø–æ–¥–Ω—è—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  
‚û° http://127.0.0.1:8000  
‚û° http://127.0.0.1:8000//docs

## ‚öôÔ∏è Pytest

### –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Å—Ç—ã:

#### üß™ –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞
#### üß™ –¢–µ—Å—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏
#### üß™ –¢–µ—Å—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏
#### üß™ –¢–µ—Å—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏
#### üß™ –¢–µ—Å—Ç –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞

##### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
   git clone https://github.com/AlexKrutskikh/Notes
   cd Notes
   pytest -v
  ```


## üåê –û–ø–∏—Å–∞–Ω–∏–µ API:

### üìß "/v1/auth/sent-code"
#### üìå –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ email.

–≠—Ç–æ—Ç endpoint –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.
–ü–∏—Å—å–º–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –ø–æ—á—Ç—ã sashcherny@yandex.ru.
–¢–∞–∫ –∂–µ –∫–æ–¥ —É–∫–∞–∑–∞–Ω –≤ –æ—Ç–≤–µ—Ç–µ –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—á—Ç–µ –∏ –∏–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º 

#### request-body:
```json
{
  "email": "krutskikh.ay@gmail.com"
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–ö–æ–¥ 10958 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ krutskikh.ay@gmail.com"
}
```
###### 400 Bad Request:
```json
{
   "msg": "value is not a valid email address: An email address must have an @-sign."
}
```
### üîê  "/v1/auth/verify-code"
#### üìå –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞.

–≠—Ç–æ—Ç endpoint –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã –≤ cookie
–ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—Ö–æ–¥–µ

#### request-body:
```json
{
    "email": "krutskikh.ay@gmail.com",
    "code":10958
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥"
}
```
###### 400 Bad Request:
```json
{
    "detail": "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥"
}
```
### üîë  "/v1/refresh-token"
#### üìå –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.

–≠—Ç–æ—Ç endpoint –æ–±–Ω–æ–≤–ª—è–µ—Ç access_token –∏ refresh_token 

#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json

{
    "success": true,
    "message": "–¢–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω"
}
```
### üìù "/v1/users/change-role"
#### üìå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–ª–∏.

–≠—Ç–æ—Ç endpoint —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–≤–∞–æ—Ç–µ–ª—è.
KEY_ROLE=56547dgfbhghjfgfg65876, 
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ

#### request-body:
```json
{
  "user_id": "67b09fb4e223fb830cec20bd",
  "role": "Admin",
  "secret_key": "56547dgfbhghjfgfg65876"
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 67b09fb4e223fb830cec20bd –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ Admin"
}
```
###### 404 Bad Request:
```json
{
    "detail": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```
###### 400 Bad Request:
```json
{
    "detail": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID"
}
```
###### 403 Bad Request:
```json
{
    "detail": "–ù–µ–≤–µ—Ä–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á"
}
```
###### 400 Bad Request:
```json
{
    "detail": "–ù–µ–≤–µ—Ä–Ω–∞—è —Ä–æ–ª—å. –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ 'User' –∏ 'Admin'"
}
```


### üìù "/v1/notes/create-notes"
#### üìå –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏.

–≠—Ç–æ—Ç endpoint —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É, —Å–≤—è–∑—ã–≤–∞–µ—Ç –µ–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å –ø–æ–º–æ—â—å—é —Ç–æ–∫–µ–Ω–∞ –∏–∑ cookie.

#### request-body:
```json
{
  "title": "string",
  "body": "string"
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–ó–∞–º–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞",
    "note_id": "67b0a34a403bdd2109c7d4fe"
}
```
### üìù "/v1/notes/update-note"
#### üìå –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏.

–≠—Ç–æ—Ç endpoint –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫—É.

#### request-body:
```json
{
  "note_id": "67b0a34a403bdd2109c7d4fe",
  "title": "string",
  "body": "string"
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–ó–∞–º–µ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"
}
```
###### 404 Bad Request:
```json
{
    "detail": "–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```
###### 403 Bad Request:
```json
{
    "detail": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –∑–∞–º–µ—Ç–∫–µ"
}
```
### üìù "/v1/notes/delete-note"
#### üìå –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏.

–≠—Ç–æ—Ç endpoint —É–¥–∞–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫—É.

#### request-body:
```json
{
  "note_id": "67b0a34a403bdd2109c7d4fe",
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "message": "–ó–∞–º–µ—Ç–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É"
}

```
###### 404 Bad Request:
```json
{
    "detail": "–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```
###### 403 Bad Request:
```json
{
    "detail": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –∑–∞–º–µ—Ç–∫–µ"
}
```
###### 403 Bad Request:
```json
{
    "detail": "–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—å—é 'User'",
}
```
### üìù "/v1/notes/get-notes"
#### üìå –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏.

–≠—Ç–æ—Ç endpoint –æ—Ç–¥–∞–µ—Ç –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏.

#### request-body:
```json
{
  "note_id": "67b0a34a403bdd2109c7d4fe",
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "notes": [
        {
            "_id": "67b0a34a403bdd2109c7d4fe",
            "title": "1",
            "body": "1",
            "created_at": "2025-02-15T17:23:06.871000",
            "updated_at": "2025-02-15T17:25:17.110000",
            "user_id": "67b09fb4e223fb830cec20bd-User"
        }
    ]
}

```
###### 403 Bad Request:
```json
{
    "detail": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è"
}
```
### üìù "/v1/notes/get-note/"
#### üìå –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏..

–≠—Ç–æ—Ç endpoint –æ—Ç–¥–∞–µ—Ç  –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–º–µ—Ç–∫—É.

#### request-body:
```json
{
  "note_id": "67b0a34a403bdd2109c7d4fe",
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "success": true,
    "note": {
        "_id": "67b0a34a403bdd2109c7d4fe",
        "title": "1",
        "body": "1",
        "created_at": "2025-02-15T17:23:06.871000",
        "updated_at": "2025-02-15T17:25:17.110000",
        "user_id": "67b09fb4e223fb830cec20bd-User"
    }
}

```
###### 404 Bad Request:
```json
{
    "detail": "–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```
###### 403 Bad Request:
```json
{
    "detail": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –∑–∞–º–µ—Ç–∫–µ"
}
```
### üìù "/v1/notes/restore-note"
#### üìå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏.

–≠—Ç–æ—Ç endpoint –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–º–µ—Ç–∫—É –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.

#### request-body:
```json
{
  "note_id": "67b0a34a403bdd2109c7d4fe",
}
```
#### request-body:
###### 200 OK (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```json
{
    "detail": "–ó–∞–º–µ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
}

```
###### 404 Bad Request:
```json
{
    "detail": "–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ"
}
```









